First stage: compute German taxes

TODO: Improve EventCard
 - chains icons, with popup with chain name
 - shortened tx id with clickable url to tracker
 - shortened address elispsis and popup with full address
 - tokens names?

TODO: Properly order columns now it depends on order in the URL
TODO: Current UI is slow when there are many events.

TODO: Go back to backend side na Moralis importer:
 - sync and track by address and chain not only chain
 - review client and accounts structure, also think about wallet id (address_chain)
 - code that creates legs for native and erc20 is similar to one for native transfers we could improve
 - do we need a token registry and mapping symbol to address and multichain address?

TODO: Manual adjustments to mark and filter out spam transactions.

TODO: I think I need standard api backend and ditching drizzle completely.
TODO: Fix codex not being able to run pnpm commands
TODO: Add to my ~/.codex/AGENTS.md instruction to after making changes try to read general context and see if there could be some code refactoring done to reduce tech debt like code duplication or similar.
TODO: Correct drizzle flow. Why it has some wrong types and I had to adjust it mannually prepare Agents info about this. Command `pnpm drizzle-kit introspect --config drizzle.config.ts`

TODO: we will end with multiple ledger legs tables in the database - maybe combine them into one with a discriminator column?

TODO: additional correction elements
 - mark spam events (can be automatic?)
 - mark non-taxable events (income)
 - combine two (or more?) events into one
 - I'm not sure about the corrections directory and which code should go where.

TODO: Import data from Coinbase hopefully through API

TODO: still need it? Maybe good UI is enough? tool to print from db event, legs etc for debugging. After provided id print whole network of entities
TODO: I'm suspicious of the tax calculations. Think how we can debug it better.

TODO: Need manual exception on taxes for some transactions. Example when Neufund gave me BTC/ETH as a bonus.
TODO: Restore inventory taxable and free.
TODO: Maybe time to change implementation and add connections to objects, not just id's. Or maybe create object repos so we could query them easily. Or just good old SQLAlchemy?
TODO: Do we need extra snapshot mechanism to, for example, output value of wallets?
TODO: Review inventory again. I don't like those intermediate objects also ones in taxes.

TODO: Import data from as this should be very easy:
  - Lido
  - Stakewise
TODO: Verify against my own spreadsheet

TODO: How to calculate income and taxes in case when I'm partly leaving the farm.
 Initial idea (from old model review)
 - ctokens only when token is sold compute gain as difference of value when bought (FIFO used for computing buy price)
 - atokens compute tax / gain every time it rebases and when selling no tax

TODO: Kraken scripts maybe move them to a separate directory, some common code can be extracted?
TODO: Review Coindesk source it's the worst code ever also review OpenExchanger client
TODO: DB improvements.
 - use Enums
 - use UUID type

TODO: Export data in a format that can be used by Steuerberater

TODO: Date chooser could be improved (in far futuren when I will need to make it nice)
 - it could follow (open/close) when the main section is being scrolled
 - active state of year and month should be properly stated

TODO: Is there a possibility to have a whitelist of commands for codex?

Second stage: tracking wealth
TODO: better visualiation use some library to nicely print stuff or maybe switch to web app
TODO: Features from WEALTH_MODEL.md
 - income
 - realized P/L
 - unrealized P/L (by asset?)

Codex commands
------------------
npm list -g @openai/codex
npm install -g @openai/codex@latest
https://github.com/openai/codex/releases

npm list -g @openai/codex && npm install -g @openai/codex@latest && npm list -g @openai/codex && codex

Libraries docs
------------------
https://getbootstrap.com/docs/5.3
https://react-bootstrap.netlify.app
https://orm.drizzle.team/docs/overview
https://react.dev/reference/react

Some loose ideas
------------------
- Ability to compute / enter the current value of open positions.
- Store history / snapshots of the state to catch changes in time

- Can system handle such use case, handle in terms of following transactions but also to compute
  the current state and profit (two or more currencies?) from the position
  - farming / borrowing on xlend.extrafi.io
    - supply cbBTC on Base
    - extra incentive through Merkl that gives
      - OP on Optimism
      - xOP on Optimism staked on xlend.extrafi.io
      - some EXTRA tokens on Optimism
    - occasionally claimed and swapped to WBTC (no cbBTC on Optimism)
    - then jumper that moves and trades it to cbBTC on Base
    - supply cbBTC to farm to decrease debt
    - borrowing USDC in xlend.extrafi.io
    - putting it into farm 40acres USDC Vault through vaults.fyi
    - occasionally get some money from the farm and repay part of the debt to decrease debt


- Polish bonds income

Other projects
------------------
- https://github.com/eprbell/rp2
- https://github.com/BittyTax

- https://app.koinly.io/p/transactions
- https://cointracking.info/
- https://app.summ.com


Source of onchain transactions
------------------
https://thegraph.com/
https://docs.etherscan.io/introduction
https://docs.cloud.debank.com/en/

https://docs.moralis.com/
